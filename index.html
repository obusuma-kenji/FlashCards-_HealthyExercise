<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>健康運動指導士フラッシュカード（100枚）</title>
  <meta name="description" content="健康運動指導士試験対策フラッシュカード100枚 - 分野別学習・進捗管理機能付き" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-white to-purple-50">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useMemo } = React;

    const CARDS_DATA = [
      ["ATP-PC系の主な持続秒数は？", "約10秒（瞬発）", "生理"],
      ["解糖系の主要燃料は？", "筋グリコーゲン／血中グルコース", "生理"],
      ["有酸素系のエネルギー産出の場は？", "ミトコンドリア", "生理"],
      ["乳酸閾値（LT）とは？", "乳酸産生が除去を上回り血中乳酸が急増する強度の閾値", "生理"],
      ["最大酸素摂取量（VO2max）の意味は？", "単位時間あたりの最大酸素利用量（全身持久力指標）", "生理"],
      ["心拍出量（Q）の計算式は？", "Q = HR × SV（心拍数×1回拍出量）", "生理"],
      ["a-vO2差とは何を示す？", "動脈血酸素含量と静脈血酸素含量の差（末梢での酸素抽出）", "生理"],
      ["RER（呼吸交換比）が1.0を超える意味は？", "非常に高強度、無酸素性代謝＋過換気状態", "生理"],
      ["DOMS（遅発性筋痛）のピークはいつ？", "運動後24〜72時間", "生理"],
      ["トレーニング初期の筋力向上の主因は？", "神経適応（運動単位動員↑）", "生理"],
      ["Borg RPE尺度13は何を意味する？", "「ややきつい」（6-20尺度）", "指標"],
      ["中強度運動のMETs範囲は？", "3.0〜5.9 METs", "指標"],
      ["推定HRmaxの簡易式は？", "220 - 年齢", "指標"],
      ["Karvonen法で使う指標は？", "心拍予備率（HRR = HRmax - HRrest）", "指標"],
      ["BMIの計算式は？", "体重(kg) ÷ 身長(m)²", "指標"],
      ["1METの定義は？", "約3.5 mL/kg/min（安静時酸素摂取量）", "指標"],
      ["診察室血圧での高血圧基準は？", "140/90 mmHg以上", "指標"],
      ["メタボリック腹囲基準（日本）は？", "男性≥85cm、女性≥90cm", "指標"],
      ["空腹時血糖で糖尿病型とされる値は？", "126 mg/dL以上", "指標"],
      ["心拍予備率（HRR）の計算式は？", "HRmax - HRrest", "指標"],
      ["FITT-VPの「V」は何を表す？", "Volume（総運動量）", "処方"],
      ["初心者の筋トレ頻度推奨は？", "週2〜3回（非連日）", "処方"],
      ["静的ストレッチの推奨時間は？", "20〜30秒×2〜4セット", "処方"],
      ["高血圧者が筋トレで避けるべきことは？", "バルサルバ法（呼吸を止める）", "処方"],
      ["糖尿病者の低血糖対策の基本は？", "糖質携行、適切なタイミング設定", "処方"],
      ["心疾患既往者の筋トレ留意点は？", "低〜中強度、呼吸止め回避", "処方"],
      ["妊娠中の運動中止サインは？", "規則的子宮収縮、出血、めまい等", "処方"],
      ["高齢者のバランス訓練例は？", "片脚立ち、タンデム歩行等", "処方"],
      ["急性期捻挫の対応原則は？", "RICE/POLICE（保護・冷却・圧迫・挙上）", "処方"],
      ["骨粗鬆症予防で重要な運動は？", "荷重運動、筋力・バランス訓練", "処方"],
      ["PAR-Q+の目的は？", "運動前の安全スクリーニング", "安全"],
      ["AED使用で避けるべきことは？", "CPRの長時間中断", "安全"],
      ["失神傾向時の基本体位は？", "仰臥位＋下肢挙上", "安全"],
      ["不安定狭心症患者の運動は？", "医師の許可必須", "安全"],
      ["感染症流行期の対策は？", "換気、距離確保、消毒", "安全"],
      ["事故報告書の必須項目は？", "日時、状況、対応、再発防止策", "安全"],
      ["心不全悪化の警戒サインは？", "急激な体重増加、浮腫", "安全"],
      ["熱中症予防で重要なことは？", "十分な補水、暑熱順化、強度調整", "安全"],
      ["一次予防とは？", "疾病発症予防（生活習慣改善等）", "公衆衛生"],
      ["NNTが小さいほど何を意味する？", "介入効率が高い（少人数で効果）", "公衆衛生"],
      ["TTMの準備期の特徴は？", "1ヶ月以内の行動開始意図、具体計画あり", "行動変容"],
      ["MI（動機づけ面接）の原則は？", "共感、是認、引き出し（強要なし）", "行動変容"],
      ["SMARTの「A」は何を表す？", "Achievable（達成可能）", "行動変容"],
      ["プレゼンティーズムとは？", "在席だが健康問題で生産性低下", "公衆衛生"],
      ["職場健康KPIに不適切なものは？", "個人の納税額等の機微情報", "実務"],
      ["初回面談で確認すべき項目は？", "既往歴、服薬、目標、障壁", "実務"],
      ["低血糖の兆候は？", "冷汗、ふるえ、動悸等", "実務"],
      ["就業配慮の提案例は？", "業務強度調整、休憩導入", "実務"],
      ["記録に不適切な項目は？", "マイナンバー等の機微情報", "実務"],
      ["Teach-back法とは？", "利用者が自分の言葉で説明し理解確認", "実務"],
      ["速筋（TypeⅡ）の特徴は？", "収縮速度速い、疲労しやすい、解糖系優位", "生理"],
      ["遅筋（TypeⅠ）の特徴は？", "持久的、酸化系優位、疲労しにくい", "生理"],
      ["筋肥大のメカニズムは？", "機械的負荷→筋タンパク合成↑", "生理"],
      ["過負荷の原則とは？", "現在の能力以上の負荷で適応を促す", "処方"],
      ["特異性の原則とは？", "目的に応じた刺激で適応が起こる", "処方"],
      ["可逆性の原則とは？", "トレーニング中止で効果消失", "処方"],
      ["個別性の原則とは？", "個人差を考慮した処方が必要", "処方"],
      ["漸進性の原則とは？", "段階的な負荷増が必要", "処方"],
      ["反復性の原則とは？", "継続的実施で効果獲得", "処方"],
      ["全面性の原則とは？", "バランスよく鍛える", "処方"],
      ["有酸素運動の推奨頻度は？", "週3〜5回、中強度で30分以上", "処方"],
      ["筋力トレの負荷設定（初心者）は？", "60〜70% 1RM、8〜12回×2〜3セット", "処方"],
      ["柔軟性向上の頻度は？", "週2〜3回以上、できれば毎日", "処方"],
      ["ウォーミングアップの目的は？", "体温上昇、心拍・血流増、傷害予防", "処方"],
      ["クールダウンの目的は？", "代謝産物除去、心拍正常化、DOMS軽減", "処方"],
      ["安静時心拍数の正常範囲は？", "成人で60〜100拍/分", "指標"],
      ["運動時の目標心拍数算出法は？", "Karvonen法：(HRmax-HRrest)×強度%+HRrest", "指標"],
      ["AT（無酸素性作業閾値）とは？", "有酸素から無酸素へ移行する運動強度", "生理"],
      ["EPOCとは？", "運動後過剰酸素消費（代謝亢進持続）", "生理"],
      ["運動誘発性喘息の予防は？", "ウォーミングアップ、マスク、薬物療法", "安全"],
      ["運動時の適切な水分補給は？", "0.1〜0.2%の食塩+糖質、15〜20分毎", "処方"],
      ["脱水の兆候は？", "口渇、尿量減、皮膚乾燥、めまい", "安全"],
      ["過換気症候群の対処は？", "呼吸回数を減らす、ゆっくり深呼吸、落ち着かせる", "安全"],
      ["運動強度の自覚的指標は？", "Borg RPE、会話テスト", "指標"],
      ["METs法による消費カロリー計算は？", "METs × 体重(kg) × 時間(h) × 1.05", "指標"],
      ["体脂肪率の標準値（成人男性）は？", "10〜20%", "指標"],
      ["体脂肪率の標準値（成人女性）は？", "20〜30%", "指標"],
      ["内臓脂肪面積の基準は？", "100cm²以上でリスク増", "指標"],
      ["LDLコレステロール基準値は？", "140mg/dL未満", "指標"],
      ["HDLコレステロール基準値は？", "40mg/dL以上", "指標"],
      ["中性脂肪の基準値は？", "150mg/dL未満", "指標"],
      ["HbA1cの基準値は？", "6.5%未満（糖尿病型は6.5%以上）", "指標"],
      ["収縮期血圧120〜139は何と呼ぶ？", "正常高値血圧", "指標"],
      ["家庭血圧での高血圧基準は？", "135/85 mmHg以上", "指標"],
      ["ロコモティブシンドロームとは？", "運動器障害で移動機能低下した状態", "公衆衛生"],
      ["サルコペニアとは？", "加齢による筋量・筋力低下", "公衆衛生"],
      ["フレイルとは？", "健康と要介護の中間状態（虚弱）", "公衆衛生"],
      ["介護予防の基本は？", "運動、栄養、社会参加", "公衆衛生"],
      ["特定保健指導の対象基準は？", "腹囲+リスク因子でレベル分け", "公衆衛生"],
      ["健康日本21のビジョンは？", "全ての国民が健やかで心豊かに生活できる持続可能な社会の実現", "公衆衛生"],
      ["身体活動基準（成人）は？", "週150分の中強度または75分の高強度", "公衆衛生"],
      ["座位行動のリスクは？", "長時間座位で疾病・死亡リスク増", "公衆衛生"],
      ["アクティブガイドの推奨は？", "+10（今より10分多く体を動かす）", "公衆衛生"],
      ["運動指導士の倫理原則は？", "安全優先、守秘義務、専門性、継続学習", "実務"],
      ["インフォームドコンセントとは？", "十分な説明と同意取得", "実務"],
      ["個人情報保護法の遵守事項は？", "適切な管理、目的外使用禁止", "実務"],
      ["リスク層別化の目的は？", "安全な運動処方のための評価", "安全"],
      ["運動負荷試験の禁忌は？", "急性心筋梗塞、不安定狭心症等", "安全"],
      ["運動中止基準の例は？", "胸痛、過度の疲労、めまい、呼吸困難", "安全"]
    ];

    function App() {
      const [currentIndex, setCurrentIndex] = useState(0);
      const [isFlipped, setIsFlipped] = useState(false);
      const [mastered, setMastered] = useState(() => {
        try {
          const saved = localStorage.getItem('flashcard_mastered');
          return saved ? JSON.parse(saved) : new Array(CARDS_DATA.length).fill(false);
        } catch {
          return new Array(CARDS_DATA.length).fill(false);
        }
      });
      const [selectedTag, setSelectedTag] = useState('all');
      const [shuffled, setShuffled] = useState(false);
      const [showStats, setShowStats] = useState(false);

      const cards = useMemo(() => 
        CARDS_DATA.map(([front, back, tags], index) => ({ 
          id: index, 
          front, 
          back, 
          tags 
        })),
        []
      );

      const tags = useMemo(() => {
        const tagSet = new Set(cards.map(c => c.tags));
        return ['all', ...Array.from(tagSet)];
      }, [cards]);

      const filteredCards = useMemo(() => {
        if (selectedTag === 'all') return cards;
        return cards.filter(c => c.tags === selectedTag);
      }, [cards, selectedTag]);

      const displayCards = useMemo(() => {
        if (!shuffled) return filteredCards;
        return [...filteredCards].sort(() => Math.random() - 0.5);
      }, [filteredCards, shuffled]);

      const currentCard = displayCards[currentIndex] || displayCards[0];

      const flipCard = () => setIsFlipped(!isFlipped);
      
      const nextCard = () => {
        setCurrentIndex((prev) => (prev + 1) % displayCards.length);
        setIsFlipped(false);
      };

      const prevCard = () => {
        setCurrentIndex((prev) => (prev - 1 + displayCards.length) % displayCards.length);
        setIsFlipped(false);
      };

      const markMastered = () => {
        if (!isFlipped) return;
        const newMastered = [...mastered];
        newMastered[currentCard.id] = true;
        setMastered(newMastered);
        nextCard();
      };

      const markNotMastered = () => {
        if (!isFlipped) return;
        const newMastered = [...mastered];
        newMastered[currentCard.id] = false;
        setMastered(newMastered);
        nextCard();
      };

      const resetProgress = () => {
        if (confirm('すべての学習進捗をリセットしますか？')) {
          setMastered(new Array(CARDS_DATA.length).fill(false));
          localStorage.removeItem('flashcard_mastered');
        }
      };

      useEffect(() => {
        try {
          localStorage.setItem('flashcard_mastered', JSON.stringify(mastered));
        } catch (e) {
          console.error('保存エラー:', e);
        }
      }, [mastered]);

      useEffect(() => {
        setCurrentIndex(0);
        setIsFlipped(false);
      }, [selectedTag, shuffled]);

      useEffect(() => {
        const handleKeyPress = (e) => {
          if (e.key === 'ArrowRight') nextCard();
          if (e.key === 'ArrowLeft') prevCard();
          if (e.key === ' ') {
            e.preventDefault();
            flipCard();
          }
          if (e.key === 'o' || e.key === 'O') markMastered();
          if (e.key === 'x' || e.key === 'X') markNotMastered();
        };
        window.addEventListener('keydown', handleKeyPress);
        return () => window.removeEventListener('keydown', handleKeyPress);
      }, [currentIndex, isFlipped, displayCards, mastered]);

      const masteredCount = mastered.filter(Boolean).length;
      const progressPercent = Math.round((masteredCount / cards.length) * 100);

      const tagStats = useMemo(() => {
        const stats = {};
        tags.filter(t => t !== 'all').forEach(tag => {
          const tagCards = cards.filter(c => c.tags === tag);
          const tagMastered = tagCards.filter(c => mastered[c.id]).length;
          stats[tag] = { total: tagCards.length, mastered: tagMastered };
        });
        return stats;
      }, [cards, mastered, tags]);

      if (!currentCard) return <div className="p-8 text-center">カードが見つかりません</div>;

      return (
        <div className="min-h-screen p-4">
          <div className="max-w-4xl mx-auto">
            <div className="bg-white rounded-2xl shadow-lg p-4 mb-4">
              <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3">
                <div>
                  <h1 className="text-2xl font-bold text-slate-800">健康運動指導士フラッシュカード</h1>
                  <p className="text-sm text-slate-600">全{cards.length}枚</p>
                </div>
                <div className="flex items-center gap-2">
                  <button
                    onClick={() => setShowStats(!showStats)}
                    className="p-2 rounded-lg bg-slate-100 hover:bg-slate-200 transition"
                    title="統計を表示"
                  >
                    📊
                  </button>
                  <button
                    onClick={() => setShuffled(!shuffled)}
                    className={`p-2 rounded-lg transition ${shuffled ? 'bg-indigo-100 text-indigo-700' : 'bg-slate-100 hover:bg-slate-200'}`}
                    title="シャッフル"
                  >
                    🔀
                  </button>
                  <button
                    onClick={resetProgress}
                    className="p-2 rounded-lg bg-slate-100 hover:bg-slate-200 transition"
                    title="進捗リセット"
                  >
                    🔄
                  </button>
                </div>
              </div>

              <div className="mt-4">
                <div className="flex items-center justify-between text-sm text-slate-600 mb-1">
                  <span>学習進捗</span>
                  <span className="font-semibold">{masteredCount} / {cards.length} ({progressPercent}%)</span>
                </div>
                <div className="w-full bg-slate-200 rounded-full h-2">
                  <div 
                    className="bg-gradient-to-r from-indigo-500 to-purple-500 h-2 rounded-full transition-all duration-500"
                    style={{width: `${progressPercent}%`}}
                  />
                </div>
              </div>

              <div className="flex flex-wrap items-center gap-2 mt-4">
                <span className="text-sm text-slate-600">🔍</span>
                {tags.map(tag => (
                  <button
                    key={tag}
                    onClick={() => setSelectedTag(tag)}
                    className={`px-3 py-1 rounded-full text-sm font-medium transition ${
                      selectedTag === tag
                        ? 'bg-indigo-600 text-white'
                        : 'bg-slate-100 text-slate-700 hover:bg-slate-200'
                    }`}
                  >
                    {tag === 'all' ? 'すべて' : tag}
                  </button>
                ))}
              </div>
            </div>

            {showStats && (
              <div className="bg-white rounded-2xl shadow-lg p-4 mb-4">
                <h3 className="font-bold text-lg mb-3">📈 分野別進捗</h3>
                <div className="grid grid-cols-2 sm:grid-cols-3 gap-3">
                  {Object.entries(tagStats).map(([tag, stat]) => (
                    <div key={tag} className="p-3 bg-slate-50 rounded-lg">
                      <div className="font-semibold text-slate-700">{tag}</div>
                      <div className="text-2xl font-bold text-indigo-600 mt-1">
                        {stat.mastered} / {stat.total}
                      </div>
                      <div className="text-xs text-slate-500">
                        {Math.round((stat.mastered / stat.total) * 100)}%
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}

            <div className="mb-4">
              <div className="text-center mb-2 text-sm text-slate-600">
                {currentIndex + 1} / {displayCards.length}
                {mastered[currentCard.id] && <span className="ml-2 text-emerald-600 font-semibold">✓ 習得済み</span>}
              </div>
              
              <div 
                onClick={flipCard}
                className="relative bg-white rounded-2xl shadow-2xl p-8 min-h-[300px] cursor-pointer transform transition-all duration-300 hover:shadow-3xl"
              >
                <div className="absolute top-4 right-4 text-xs font-semibold text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full">
                  {currentCard.tags}
                </div>
                
                <div className="flex items-center justify-center min-h-[250px]">
                  <div className="text-center">
                    {!isFlipped ? (
                      <>
                        <div className="text-sm text-slate-500 mb-2">Question</div>
                        <div className="text-2xl font-bold text-slate-800">{currentCard.front}</div>
                        <div className="text-sm text-slate-400 mt-4">クリックまたはスペースキーでめくる</div>
                      </>
                    ) : (
                      <>
                        <div className="text-sm text-emerald-600 mb-2">Answer</div>
                        <div className="text-xl text-slate-700 leading-relaxed">{currentCard.back}</div>
                      </>
                    )}
                  </div>
                </div>
              </div>
            </div>

            <div className="bg-white rounded-2xl shadow-lg p-4">
              <div className="flex items-center justify-between gap-3">
                <button
                  onClick={prevCard}
                  className="flex items-center gap-2 px-4 py-3 bg-slate-100 hover:bg-slate-200 rounded-xl transition font-medium"
                >
                  ← <span className="hidden sm:inline">前へ</span>
                </button>

                <div className="flex gap-2">
                  <button
                    onClick={markNotMastered}
                    disabled={!isFlipped}
                    className="flex items-center gap-2 px-4 py-3 bg-rose-100 hover:bg-rose-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl transition font-medium text-rose-700"
                  >
                    ✗ <span className="hidden sm:inline">まだ (X)</span>
                  </button>
                  <button
                    onClick={markMastered}
                    disabled={!isFlipped}
                    className="flex items-center gap-2 px-4 py-3 bg-emerald-100 hover:bg-emerald-200 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl transition font-medium text-emerald-700"
                  >
                    ✓ <span className="hidden sm:inline">覚えた (O)</span>
                  </button>
                </div>

                <button
                  onClick={nextCard}
                  className="flex items-center gap-2 px-4 py-3 bg-slate-100 hover:bg-slate-200 rounded-xl transition font-medium"
                >
                  <span className="hidden sm:inline">次へ</span> →
                </button>
              </div>
            </div>

            <details className="mt-4 bg-white rounded-2xl shadow-lg p-4">
              <summary className="font-semibold cursor-pointer text-slate-700">⌨️ キーボードショートカット</summary>
              <div className="mt-3 space-y-2 text-sm text-slate-600">
                <div className="flex justify-between">
                  <span className="font-mono bg-slate-100 px-2 py-1 rounded">← / →</span>
                  <span>前のカード / 次のカード</span>
                </div>
                <div className="flex justify-between">
                  <span className="font-mono bg-slate-100 px-2 py-1 rounded">スペース</span>
                  <span>カードをめくる</span>
                </div>
                <div className="flex justify-between">
                  <span className="font-mono bg-slate-100 px-2 py-1 rounded">O</span>
                  <span>覚えた（習得済みにする）</span>
                </div>
                <div className="flex justify-between">
                  <span className="font-mono bg-slate-100 px-2 py-1 rounded">X</span>
                  <span>まだ（未習得にする）</span>
                </div>
              </div>
            </details>

            <div className="text-center text-xs text-slate-400 mt-6">
              健康運動指導士学習用フラッシュカード - 100枚
            </div>
          </div>
        </div>
      );
    }

    const container = document.getElementById('root');
    const root = ReactDOM.createRoot(container);
    root.render(<App />);
  </script>
</body>
</html>